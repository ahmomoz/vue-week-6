import{_ as b,o as n,c as i,a as t,n as m,k as _,F as g,e as p,t as r,l as k,h as v,b as f,r as y}from"./index-Zg-dMfv0.js";import{L as P}from"./index-FJdjQ7kr.js";const L={props:["pagination"],methods:{getProductsList(c){this.$emit("emit-getproductslist",c)}}},B={"aria-label":"Page navigation example"},x={class:"pagination"},C=t("span",{"aria-hidden":"true"},"«",-1),w=[C],$=["onClick"],N=t("span",{"aria-hidden":"true"},"»",-1),V=[N];function E(c,e,o,u,a,d){return n(),i("nav",B,[t("ul",x,[t("li",{class:m(["page-item",{disabled:o.pagination.current_page===1}])},[t("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=_(l=>d.getProductsList(o.pagination.current_page-1),["prevent"]))},w)],2),(n(!0),i(g,null,p(o.pagination.total_pages,l=>(n(),i("li",{class:"page-item",key:l},[t("a",{class:"page-link",href:"#",onClick:_(h=>d.getProductsList(l),["prevent"])},r(l),9,$)]))),128)),t("li",{class:m(["page-item",{disabled:o.pagination.current_page===o.pagination.total_pages}])},[t("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=_(l=>d.getProductsList(o.pagination.current_page+1),["prevent"]))},V)],2)])])}const z=b(L,[["render",E]]),D={data(){return{sortBy:"default",ascending:!0,products:[],productsDetail:{},tempProduct:{imagesUrl:[]},pagination:{},isLoading:!0}},methods:{getProductsList(c=1){this.isLoading=!0,this.$axios.get(`https://vue3-course-api.hexschool.io/v2/api/ahmomoz/admin/products?page=${c}`).then(e=>{const{products:o,pagination:u}=e.data;this.products=o,this.pagination=u}).catch(e=>{alert(e.response.data.message)}).finally(()=>{this.isLoading=!1})}},computed:{sortProducts(){return[...this.products].sort((e,o)=>this.ascending?e[this.sortBy]-o[this.sortBy]:o[this.sortBy]-e[this.sortBy])}},mounted(){this.getProductsList()},components:{CardPagination:z,Loading:P}},F={id:"app"},G={class:"container"},A={class:"text-end mt-4"},M={class:"table mt-4"},S=t("th",{width:"120"}," 分類 ",-1),U=t("th",null," 產品名稱 ",-1),j=t("th",{width:"100"}," 是否啟用 ",-1),q=t("th",{width:"120"}," 編輯 ",-1),H={key:0},I={key:0,class:"text-success"},J={key:1},K=t("td",null,[t("div",{class:"btn-group"},[t("button",{type:"button",class:"btn btn-outline-primary btn-sm"}," 編輯 "),t("button",{type:"button",class:"btn btn-outline-danger btn-sm"}," 刪除 ")])],-1),O={key:1},Q={key:0,class:"text-success"},R={key:1},T=t("td",null,null,-1);function W(c,e,o,u,a,d){const l=y("loading"),h=y("card-pagination");return n(),i("div",F,[t("div",G,[t("div",A,[t("button",{type:"button",class:"btn btn-light",onClick:e[0]||(e[0]=s=>a.ascending=!a.ascending)},r(a.ascending?"降冪":"升冪")+"排序",1)]),t("table",M,[t("thead",null,[t("tr",null,[S,U,t("th",{width:"120",onClick:e[1]||(e[1]=s=>a.sortBy="origin_price")}," 原價 "),t("th",{width:"120",onClick:e[2]||(e[2]=s=>a.sortBy="price")}," 售價 "),j,q])]),a.sortBy==="default"?(n(),i("tbody",H,[a.isLoading?(n(),k(l,{key:0,active:a.isLoading,"can-cancel":!1},null,8,["active"])):v("",!0),(n(!0),i(g,null,p(a.products,s=>(n(),i("tr",{key:s.id},[t("td",null,r(s.category),1),t("td",null,r(s.title),1),t("td",null,r(s.origin_price),1),t("td",null,r(s.price),1),t("td",null,[s.is_enabled?(n(),i("span",I,"啟用")):(n(),i("span",J,"未啟用"))]),K]))),128))])):(n(),i("tbody",O,[(n(!0),i(g,null,p(d.sortProducts,s=>(n(),i("tr",{key:s.name},[t("td",null,r(s.category),1),t("td",null,r(s.title),1),t("td",null,r(s.origin_price),1),t("td",null,r(s.price),1),t("td",null,[s.is_enabled?(n(),i("span",Q,"啟用")):(n(),i("span",R,"未啟用"))]),T]))),128))]))]),f(h,{pagination:a.pagination,onEmitGetproductslist:d.getProductsList},null,8,["pagination","onEmitGetproductslist"])])])}const Z=b(D,[["render",W]]);export{Z as default};
